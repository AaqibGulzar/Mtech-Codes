<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body>pollutantmean &lt;- function(directory, pollutant, id = 1:<a href="tel:332">332</a>) {<br>&nbsp; <br>&nbsp; # Format number with fixed width and then append .csv to number<br>&nbsp; fileNames &lt;- paste0(directory, '/', formatC(id, width=3, flag="0"), ".csv" )<br>&nbsp; <br>&nbsp; # Reading in all files and making a large <a href="http://data.table">data.table</a><br>&nbsp; lst &lt;- lapply(fileNames, <a href="http://data.table">data.table</a>::fread)<br>&nbsp; dt &lt;- rbindlist(lst)<br>&nbsp; <br>&nbsp; if (c(pollutant) %in% names(dt)){<br>&nbsp;&nbsp;&nbsp; return(dt[, lapply(.SD, mean, <a href="http://na.rm">na.rm</a> = TRUE), .SDcols = pollutant][[1]])<br>&nbsp; } <br>}<br><br># Example usage<br>pollutantmean(directory = '~/Desktop/specdata', pollutant = 'sulfate', id = 20)</body></html>